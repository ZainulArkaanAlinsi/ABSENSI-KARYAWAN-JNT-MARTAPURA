{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/admin-attendance-jne/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore } from 'firebase/firestore';\nimport { getStorage } from 'firebase/storage';\n\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD8_xQ095GsDSOr_nhONflsPa0qtMnWfkY\",\n  authDomain: \"admin-absensi-jne-mtp.firebaseapp.com\",\n  projectId: \"admin-absensi-jne-mtp\",\n  storageBucket: \"admin-absensi-jne-mtp.firebasestorage.app\",\n  messagingSenderId: \"586449872388\",\n  appId: \"1:586449872388:web:e72ef8330d71be35ce3751\",\n  measurementId: \"G-19LD1SX6W3\"\n};\n\n\n// Prevent duplicate initialization in Next.js dev mode\nconst app = getApps().length ? getApp() : initializeApp(firebaseConfig);\n\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\nexport const storage = getStorage(app);\n\nexport default app;\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,4DAA4D;AAC5D,iEAAiE;AAEjE,wCAAwC;AACxC,mEAAmE;AACnE,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAGA,uDAAuD;AACvD,MAAM,MAAM,IAAA,4MAAO,IAAG,MAAM,GAAG,IAAA,2MAAM,MAAK,IAAA,kNAAa,EAAC;AAEjD,MAAM,OAAO,IAAA,sMAAO,EAAC;AACrB,MAAM,KAAK,IAAA,gNAAY,EAAC;AACxB,MAAM,UAAU,IAAA,4MAAU,EAAC;uCAEnB"}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["C:/Users/USER/admin-attendance-jne/src/context/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport {\n  signInWithEmailAndPassword,\n  signOut as firebaseSignOut,\n  onAuthStateChanged,\n  User,\n} from 'firebase/auth';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { auth, db } from '@/lib/firebase';\n\ninterface AdminUser {\n  uid: string;\n  email: string | null;\n  name: string;\n  role: 'admin' | 'superadmin';\n}\n\ninterface AuthContextType {\n  user: AdminUser | null;\n  firebaseUser: User | null;\n  loading: boolean;\n  error: string | null;\n  signIn: (email: string, password: string) => Promise<void>;\n  signOut: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<AdminUser | null>(null);\n  const [firebaseUser, setFirebaseUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (fbUser) => {\n      setFirebaseUser(fbUser);\n      if (fbUser) {\n        try {\n          const userDoc = await getDoc(doc(db, 'users', fbUser.uid));\n          if (userDoc.exists()) {\n            const data = userDoc.data();\n            if (data.role === 'admin' || data.role === 'superadmin') {\n              setUser({\n                uid: fbUser.uid,\n                email: fbUser.email,\n                name: data.name || fbUser.email || 'Admin',\n                role: data.role,\n              });\n            } else {\n              // Not an admin â€” sign out\n              await firebaseSignOut(auth);\n              setUser(null);\n              setError('Akses ditolak. Akun ini bukan admin.');\n            }\n          } else {\n            setUser(null);\n          }\n        } catch {\n          setUser(null);\n        }\n      } else {\n        setUser(null);\n      }\n      setLoading(false);\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const signIn = async (email: string, password: string) => {\n    setError(null);\n    setLoading(true);\n    try {\n      await signInWithEmailAndPassword(auth, email, password);\n    } catch (err: unknown) {\n      const msg = err instanceof Error ? err.message : 'Login gagal';\n      if (msg.includes('invalid-credential') || msg.includes('wrong-password')) {\n        setError('Email atau password salah.');\n      } else if (msg.includes('too-many-requests')) {\n        setError('Terlalu banyak percobaan. Coba lagi nanti.');\n      } else {\n        setError('Login gagal. Periksa koneksi internet Anda.');\n      }\n      setLoading(false);\n      throw err;\n    }\n  };\n\n  const signOut = async () => {\n    await firebaseSignOut(auth);\n    setUser(null);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, firebaseUser, loading, error, signIn, signOut }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const ctx = useContext(AuthContext);\n  if (!ctx) throw new Error('useAuth must be used within AuthProvider');\n  return ctx;\n}\n"],"names":["c","_c","React","createContext","useContext","useEffect","useState","signInWithEmailAndPassword","signOut","firebaseSignOut","onAuthStateChanged","User","doc","getDoc","auth","db","AdminUser","uid","email","name","role","AuthContextType","user","firebaseUser","loading","error","signIn","password","Promise","AuthContext","AuthProvider","children","ReactNode","setUser","setFirebaseUser","setLoading","setError","unsubscribe","fbUser","userDoc","exists","data","err","msg","Error","message","includes","useAuth","$","$i","Symbol","for","ctx"],"mappings":"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","ignoreList":[]}}]
}